# مقایسهٔ IPv4 و IPv6

این سند مقایسه‌ای خلاصه و فنی بین پروتکل‌های آدرس‌دهی اینترنت **IPv4** و **IPv6** ارائه می‌دهد، همراه با مثال‌های پیکربندی، مکانیسم‌های مهاجرت و توصیه‌های عملی برای تیم‌های شبکه.

---

## مرور کلی
- **IPv4**: پروتکل IPv4 از آدرس 32 بیتی استفاده می‌کند و از دههٔ 1980 گسترده شد. فضای آدرس محدود است.
- **IPv6**: طراحی شده برای جایگزینی IPv4 با آدرس 128 بیتی، مقیاس‌پذیری بالا و برخی بهبودهای طراحی (از جمله ساختار header ساده‌تر و پشتیبانی بهتر از اتوپیکینگ).

---

## مقایسهٔ سریع (جدول)

| ویژگی | IPv4 | IPv6 |
|---|---:|---|
| اندازهٔ آدرس | 32 بیت (2³² = **4,294,967,296**) | 128 بیت (2¹²⁸ ≈ **3.4028×10³⁸**) |
| نمایش آدرس | نقطه‌نقطه‌ای (مثال: `192.0.2.1`) | هگزادسیمال با `:` (مثال: `2001:db8::1`) |
| فضای آدرس | محدود، نیاز به NAT در بسیاری از شبکه‌ها | بسیار بزرگ — تقریباً نامحدود برای کاربردهای فعلی |
| فرمت هدر | سایز متغیر، حداقل 20 بایت | هدر ثابت 40 بایت + extension headers |
| fragmentation | روترها و میزبان ممکن است | میزبان‌ها انجام می‌دهند؛ روترها معمولاً fragment نمی‌کنند (extension header) |
| Broadcast | دارد (پخش محلی) | ندارد (از multicast استفاده می‌کند) |
| NAT | رایج (برای مدیریت کمبود آدرس) | عمدتاً غیرضروری؛ هدف آدرس‌دهی end-to-end |
| Auto-configuration | محدود (DHCPv4 معمول) | SLAAC (stateless autoconfig) و DHCPv6 |
| امنیت | IPsec اختیاری، کاربردی ولی پیاده‌سازی متنوع | IPsec در طراحی لحاظ شده اما اجرای آن اختیاری است |
| QoS / Flow | محدود | فیلد Flow Label و بهبود در ترافیک حساس |
| مهاجرت | — | نیازمند مکانیزم‌های گذار (dual-stack, tunneling, translation) |

---

## جزئیات هدر (ساده‌شده)

**IPv4 (حداقل 20 بایت)**  
`Version | IHL | TOS | Total Length | Identification | Flags | Fragment Offset | TTL | Protocol | Header Checksum | Src Addr | Dst Addr | Options (اختیاری)`

**IPv6 (ثابت 40 بایت)**  
`Version | Traffic Class | Flow Label | Payload Length | Next Header | Hop Limit | Src Addr (128b) | Dst Addr (128b)`  
- Fragmentation در IPv6 با extension header انجام می‌شود (روترها معمولاً fragment نمی‌کنند).

---

## مثال آدرس‌ها
- IPv4: `192.0.2.10/24` (شبکه مستندسازی)  
- IPv6: `2001:db8::10/64` (فضای مستندسازی برای نمونه‌ها `2001:db8::/32`)

---

## نمونهٔ دستورات لینوکس (سریع)
- نمایش آدرس‌ها:
  ```bash
  ip addr show        # IPv4 + IPv6
  ip -6 addr show     # فقط IPv6
